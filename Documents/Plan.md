# **План автоматизации**

## **Цель проекта**:

1. Сократить время проведения регрессионных тестов на каждом релизе веб-сервиса Марракэш с функционалом покупки туров по дебетовой карте и через оформление кредита по данным банковской карты.
2. Тестируемое ПО и виды проверок
3. Приложение Марракэш: проверка корректности ввода данных для дебетовых карт (UI), проверка корректности пересылки данных на сервис платежей, корректность пересылки данных на Payment Gate (API)
4. Приложение Марракэш, проверка корректности ввода данных для кредитных карт (UI), корректность пересылки данных кредитному сервису, далее на Credit Gate (API)
5. Поддержка СУБД MySQL – тестирование корректности хранения и возврата данных из СУБД 
6. Поддержка СУБД PostgreSQL– тестирование корректности хранения и возврата данных из СУБД 

## **Перечень используемых инструментов с обоснованием выбора**

- JAVA 8 (IDEA) – основной язык, используемый для автоматизации тестирования в рамках данной задачи
- Lombok – вспомогательная библиотека для работы с JAVA
- Selenide – автоматизатор UI тестов для JAVA
- Docker – для использования контейнерных приложений
- Allure – итоговые отчеты по результатам тестирования
- Git Hub – репозиторий, где хранится код
- MySQL – база данных из условия задачи
- PostgreSQL – вторя база данных из условий задачи

## **Перечень автоматизируемых сценариев**

### **Условия по валидности карт**:

1. Валидная: 
- подтвержденная базой данных: поле номер: 4444 4444 4444 4441 (статус APPROVED)
- поле номер: заполнено цифрами, ровно 16 знаков
- месяц: поле заполнено,  задан двузначным числом от 01 до 12. Если год текущий, то месяц должен быть не позднее текущего
- год: поле заполнено, задан двузначным числом от текущего до "текущий год + 5" (например, 23)
- владелец: поле заполнено, имя фамилия заданы латиницей, без использования спец. символов и цифр
- CVC/CVV: поле заполнено, три цифры

2. Невалидная по условиям задачи: 
- номер 4444 4444 4444 4442 - неподтвержденная (статус DECLINED)

### **Блок проверки для покупки туров**

1. Покупка туров. UI-тест. Позитивный сценарий (карта валидная, статус APPROVED)
    - Нажать кнопку "Купить"
    - Ввести данные валидной карты
    - Подтвердить ввод (нажать кнопку «Продолжить»)
   
**Ожидание**:
* получить от базы данных статус "APPROVED"

2. Покупка туров. UI-тест. Негативный сценарий (карта невалидная, статус DECLINED)
    - Нажать кнопку "Купить"
    - Ввести данные невалидной карты
    - Подтвердить ввод (нажать кнопку «Продолжить»)

**Ожидание**:
* получить от базы данных статус "DECLINED"

3. Покупка туров. UI-тест. Негативный сценарий (карта с правильными данными, но с номером, отличным от валидной/ невалидной карты)
    - Нажать кнопку "Купить"
    - Ввести данные валидной карты (кроме номера)
    - В поле "Номер карты" ввести: 4444 4444 4444 4443
    - Подтвердить ввод (нажать кнопку «Продолжить»)
      
**Ожидание**: 
* получить от базы данных статус "", данные не должны приниматься

4. Покупка туров. UI-тест. Негативный сценарий (карта валидная, срок действия истек (месяцы))
    - Нажать кнопку "Купить"
    - Ввести данные валидной карты (кроме месяца действия)
    - В поле "Месяц" ввести любой прошедший месяц в текущем году
    - В поле "Год" ввести текущий год
    - Подтвердить ввод (нажать кнопку «Продолжить»)
    - 
**Ожидание**: получить уведомление от сервиса: «Неверно указан срок действия карты»

5. Покупка туров. UI-тест. Негативный сценарий (карта валидная, срок действия истек (год))
    - Нажать кнопку "Купить"
    - Ввести данные валидной карты (кроме года действия)
    - В поле "Год" ввести любой прошедший год
    - Подтвердить ввод (нажать кнопку «Продолжить»)

**Ожидание**: получить уведомление от сервиса: «Истек срок действия карты»

6. Покупка туров. UI-тест. Негативный сценарий (карта валидная, поле "Месяц" не заполнено)
    - Нажать кнопку "Купить"
    - Ввести данные валидной карты (кроме поля месяц действия)
    - Поле "Месяц" оставить пустым
    - Подтвердить ввод (нажать кнопку «Продолжить»)

**Ожидание**: получить уведомление от сервиса: «Неверный формат»

7. Покупка туров. UI-тест. Негативный сценарий (карта валидная, поле "Месяц" заполнено одной цифрой)
    - Нажать кнопку "Купить"
    - Ввести данные валидной карты (кроме поля месяц действия)
    - В поле "Месяц" ввести 1
    - Подтвердить ввод (нажать кнопку «Продолжить»)

**Ожидание**: получить уведомление от сервиса: «Неверный формат»

8. Покупка туров. UI-тест. Негативный сценарий (карта валидная, поле "Месяц" заполнено двумя нулями 00)
    - Нажать кнопку "Купить"
    - Ввести данные валидной карты (кроме поля месяц действия)
    - В поле "Месяц" ввести 00
    - Подтвердить ввод (нажать кнопку «Продолжить»)

**Ожидание**: получить уведомление от сервиса: «Неверный формат»

9. Покупка туров. UI-тест. Негативный сценарий (карта валидная, поле "Месяц" заполнено двузначным числом, больше 12)
    - Нажать кнопку "Купить"
    - Ввести данные валидной карты (кроме поля месяц действия)
    - В поле "Месяц" ввести 13
    - Подтвердить ввод (нажать кнопку «Продолжить»)
      
**Ожидание**: получить уведомление от сервиса: «Неверный формат»

10. Покупка туров. UI-тест. Негативный сценарий (карта валидная, поле "Год" не заполнено)
    - Нажать кнопку "Купить"
    - Ввести данные валидной карты (кроме года действия)
    - Поле "Год" оставить пустым
    - Подтвердить ввод (нажать кнопку «Продолжить»)
      
**Ожидание**: получить уведомление от сервиса: «Неверный формат»

11. Покупка туров. UI-тест. Негативный сценарий (карта валидная, поле "Год" заполнено одной цифрой)
    - Нажать кнопку "Купить"
    - Ввести данные валидной карты (кроме года действия)
    - В поле "Год" ввести 1
    - Подтвердить ввод (нажать кнопку «Продолжить»)

**Ожидание**: получить уведомление от сервиса: «Неверный формат»
    
12. Покупка туров. UI-тест. Негативный сценарий (карта с правильными данными, но с номером менее 16 знаков)
    - Нажать кнопку "Купить"
    - Ввести данные валидной карты (кроме номера)
    - В поле "Номер карты" ввести: 4444 4444 4444 444
    - Подтвердить ввод (нажать кнопку «Продолжить»)

**Ожидание**: получить уведомление от сервиса: «Неверный формат»

13. Покупка туров. UI-тест. Негативный сценарий (карта с правильными данными, но поле "номер" пустое)
    - Нажать кнопку "Купить"
    - Ввести данные валидной карты (кроме номера)
    - Поле "Номер карты" оставить пустым
    - Подтвердить ввод (нажать кнопку «Продолжить»)

**Ожидание**: получить уведомление от сервиса: «Неверный формат»

14. Покупка туров. UI-тест. Негативный сценарий (карта валидная, не заполнено поле с именем владельца)
    - Нажать кнопку "Купить"
    - Ввести данные валидной карты (кроме имени владельца)
    - Поле "Владелец" оставить пустым
    - Подтвердить ввод (нажать кнопку «Продолжить»)

**Ожидание**: получить уведомление от сервиса: «Поле обязательно для заполнения»

15. Покупка туров. UI-тест. Негативный сценарий (карта валидная, не поле "Владелец" заполено на кириллице)
    - Нажать кнопку "Купить"
    - Ввести данные валидной карты (кроме имени владельца)
    - В поле "Владелец" ввести "Иван Иванов"
    - Подтвердить ввод (нажать кнопку «Продолжить»)

**Ожидание**: получить уведомление от сервиса: «Неверный формат»
    
16. Покупка туров. UI-тест. Негативный сценарий (карта валидная, не заполнено поле с CVC/CVV)
    - Нажать кнопку "Купить"
    - Ввести данные валидной карты (кроме CVC/CVV)
    - Поле " CVC/CVV " оставить пустым
    - Подтвердить ввод (нажать кнопку «Продолжить»)

**Ожидание**: получить уведомление от сервиса: «Неверный формат»

17. Покупка туров. UI-тест. Негативный сценарий (карта валидная, в поле с CVC/CVV двузначное число)
    - Нажать кнопку "Купить"
    - Ввести данные валидной карты (кроме CVC/CVV)
    - В поле " CVC/CVV " ввести 12
    - Подтвердить ввод (нажать кнопку «Продолжить»)

**Ожидание**: получить уведомление от сервиса: «Неверный формат»
    
### **Блок проверки для покупки туров в кредит**

1. Оформление кредита. UI-тест. Позитивный сценарий (карта валидная, статус APPROVED)
    - Нажать кнопку "Купить в кредит"
    - Ввести данные валидной карты
    - Подтвердить ввод (нажать кнопку «Продолжить»)
    - Получить уведомление от сервиса об успешной операции: «Успешно. Операция одобрена банком»

**Ожидание**:
- получить от базы данных статус "APPROVED"

2. Оформление кредита. UI-тест. Негативный сценарий (карта невалидная, статус DECLINED)
    - Нажать кнопку "Купить в кредит"
    - Ввести номер невалидной карты 4444 4444 4444 4442
    - Подтвердить ввод (нажать кнопку «Продолжить»)

**Ожидание**:
    - получить от базы данных статус "DECLINED"

3. Оформление кредита. UI-тест. Негативный сценарий (карта с правильными данными, но с номером, отличным от валидной/ невалидной карты)
    - Нажать кнопку "Купить в кредит"
    - Ввести данные валидной карты (кроме номера)
    - В поле "Номер карты" ввести: 4444 4444 4444 4443
    - Подтвердить ввод (нажать кнопку «Продолжить»)
   
**Ожидание**:
- получить от базы данных - статус ""


4. Оформление кредита. UI-тест. Негативный сценарий (карта валидная, срок действия истек (месяцы))
    - Нажать кнопку "Купить в кредит"
    - Ввести данные валидной карты (кроме месяца действия)
    - В поле "Месяц" ввести любой прошедший месяц в текущем году
    - В поле "Год" ввести текущий год
    - Подтвердить ввод (нажать кнопку «Продолжить»)

**Ожидание**: получить уведомление от сервиса: «Неверно указан срок действия карты»

5. Оформление кредита. UI-тест. Негативный сценарий (карта валидная, срок действия истек (год))
    - Нажать кнопку "Купить в кредит"
    - Ввести данные валидной карты (кроме года действия)
    - В поле "Год" ввести любой прошедший год
    - Подтвердить ввод (нажать кнопку «Продолжить»)
   
**Ожидание**: получить уведомление от сервиса: «Истек срок действия карты»

6. Оформление кредита. UI-тест. Негативный сценарий (карта валидная, не заполнено поле "Год")
    - Нажать кнопку "Купить в кредит"
    - Ввести данные валидной карты (кроме года действия)
    - Поле "Год" оставить пустым
    - Подтвердить ввод (нажать кнопку «Продолжить»)

**Ожидание**: получить уведомление от сервиса: «Неверный формат»


7. Оформление кредита. UI-тест. Негативный сценарий (карта валидная, не заполнено поле с именем владельца)
    - Нажать кнопку "Купить в кредит"
    - Ввести данные валидной карты (кроме имени владельца)
    - Поле "Владелец" оставить пустым
    - Подтвердить ввод (нажать кнопку «Продолжить»)

**Ожидание**: получить уведомление от сервиса: «Поле обязательно для заполнения»
    
8. Оформление кредита. UI-тест. Негативный сценарий (карта валидная, не заполнено поле с CVC/CVV)
    - Нажать кнопку "Купить в кредит"
    - Ввести данные валидной карты (кроме CVC/CVV)
    - Поле " CVC/CVV " оставить пустым
    - Подтвердить ввод (нажать кнопку «Продолжить»)
   
**Ожидание**: получить уведомление от сервиса: «Неверный формат»

9. Оформление кредита. UI-тест. Негативный сценарий (карта валидная, не заполнено поле "Месяц")
    - Нажать кнопку "Купить в кредит"
    - Ввести данные валидной карты (кроме месяца действия)
    - Поле "Месяц" оставить пустым
    - Подтвердить ввод (нажать кнопку «Продолжить»)

**Ожидание**: получить уведомление от сервиса: «Неверный формат»
   
10. Оформление кредита. UI-тест. Негативный сценарий (карта валидная, поле "Месяц" заполнено одной цифрой)
    - Нажать кнопку "Купить"
    - Ввести данные валидной карты (кроме поля месяц действия)
    - В поле "Месяц" ввести 1
    - Подтвердить ввод (нажать кнопку «Продолжить»)

**Ожидание**: получить уведомление от сервиса: «Неверный формат»

11. Оформление кредита. UI-тест. Негативный сценарий (карта валидная, поле "Месяц" заполнено двумя нулями 00)
    - Нажать кнопку "Купить"
    - Ввести данные валидной карты (кроме поля месяц действия)
    - В поле "Месяц" ввести 00
    - Подтвердить ввод (нажать кнопку «Продолжить»)

**Ожидание**: получить уведомление от сервиса: «Неверный формат»

12. Оформление кредита. UI-тест. Негативный сценарий (карта валидная, поле "Месяц" заполнено двузначным числом, больше 12)
    - Нажать кнопку "Купить"
    - Ввести данные валидной карты (кроме поля месяц действия)
    - В поле "Месяц" ввести 13
    - Подтвердить ввод (нажать кнопку «Продолжить»)

**Ожидание**: получить уведомление от сервиса: «Неверный формат»

13. Оформление кредита. UI-тест. Негативный сценарий (карта валидная, поле "Год" заполнено одной цифрой)
    - Нажать кнопку "Купить"
    - Ввести данные валидной карты (кроме года действия)
    - В поле "Год" ввести 1
    - Подтвердить ввод (нажать кнопку «Продолжить»)

**Ожидание**: получить уведомление от сервиса: «Неверный формат»
    
14. Оформление кредита. UI-тест. Негативный сценарий (карта с правильными данными, но с номером менее 16 знаков)
    - Нажать кнопку "Купить"
    - Ввести данные валидной карты (кроме номера)
    - В поле "Номер карты" ввести: 4444 4444 4444 444
    - Подтвердить ввод (нажать кнопку «Продолжить»)

**Ожидание**: получить уведомление от сервиса: «Неверный формат»

15. Оформление кредита. UI-тест. Негативный сценарий (карта с правильными данными, но поле "номер" пустое)
    - Нажать кнопку "Купить"
    - Ввести данные валидной карты (кроме номера)
    - Поле "Номер карты" оставить пустым
    - Подтвердить ввод (нажать кнопку «Продолжить»)

**Ожидание**: получить уведомление от сервиса: «Неверный формат»

16. Оформление кредита. UI-тест. Негативный сценарий (карта валидная, не поле "Владелец" заполено на кириллице)
    - Нажать кнопку "Купить"
    - Ввести данные валидной карты (кроме имени владельца)
    - В поле "Владелец" ввести "Иван Иванов"
    - Подтвердить ввод (нажать кнопку «Продолжить»)

**Ожидание**: получить уведомление от сервиса: «Неверный формат»

17. Оформление кредита. UI-тест. Негативный сценарий (карта валидная, в поле с CVC/CVV двузначное число)
    - Нажать кнопку "Купить"
    - Ввести данные валидной карты (кроме CVC/CVV)
    - В поле " CVC/CVV " ввести 12
    - Подтвердить ввод (нажать кнопку «Продолжить»)

**Ожидание**: получить уведомление от сервиса: «Неверный формат»

## **Этапы автоматизации тестирования**

1. Подготовить тест план
2. Разработать пилотную версию фреймворка: 
3. Настроить IDEA, подключить все инструменты из п.3
4. Определить  набор автотестов, написать их
5. Подключить Allure
6. Выложить на GitHub

## **Перечень и описание возможных рисков по автоматизации**

1. Нет описания о желаемом результате работы сервиса/ корректности данных кроме номера карты. Корректность поведения определяется исходя из жизненного опыта тестировщика, соответственно положительный результат может отличаться от видения заказчика
2. Возможные ошибки при настройке среды тестирования

## **Интервальная оценка с учетом рисков в часах**
- Ручное тестирование приложения – 2 часа;
- Написание плана тестирования – 4 часа;
- Настройка среды для тестирования – 48 часов;
- Написание кода для автотестирования –60 часов;
- Настройка отчетности – 24 часа

**Итого: 116 часов**

## **План сдачи работ: когда будут готовы автотесты, результаты их прогона**

1. Автотесты – срок исполнения до 30.09.23 (с учетом возможности работать только по выходным)
2. Результаты прогона – 06.10.23



